openapi: 3.0.3
info:
  title: 'WIP: OGC Testbed-16 D137 DGGS server API - process style'
  description: |-
    WARNING - This is work-in-progress.

    The API supports, as per CFP, "the geographic location to zone-ID(s) and reverse conversion", plus other eventual additions to allow better comparison and discussion.

    Basic ideas:
    * The same API elements are used for a DGGS-RS service and a DGGS-Data service
    * In the case of a DGGS-RS service, the collections are the DGGS instances themselves, 
      and the returned features have no properties other than the geometry and resolution
      (e.g., in GeoJSON the properties object will be ``null``)
    * In the case of a DGGS-Data service, the collections are the sample DGGS data (hence, made available in a particular DGGS instance, too), and the returned features have
      actual values associated in the ``properties`` object.

    To care for different use cases, two different output formats will be implemented
    for each endpoint returning cells:
    * A classic GeoJSON output, with geometry being either the boundary or the center 
      point of the zone (to be controlled with a request parameter), for usage in classic
      GIS tools. The longitudes ill eventually be extended outside of the -180,180 
      range to allow visualization by tools that cannot deal properly with dateline crossing.
    * A DGGSJSON output, small variation of the classic GeoJSON where the geometry is 
      replaced by an array of zone-ids, to be used in both zone oriented and feature oriented
      API (e.g., the)

    Questions, discussion topics:
    * Support for multiple DDGSs, we are using rHealPix and H3, to offer the 
      clients and DGGS data server at least a DGGS they are not already supporting natively
    * Is the API going to be sufficiently self describing that the clients
      can figure out everything it needs by just walking the API, or will it need specific knowledge contained in an API profile (e.g, a profile for rHeadlPix, one for H3, cosider for example zoneId and how to determine them)
    * For parametric DDGSs (e.g., rHealPix) do we expose a specific instance as its own DGGS, or somehow expose the full parameters of the DGGS in each resource?
    * This API follows a process API, where most resources are a process and one needs to know valid values to hit them


    CHANGES
    * 2020-07-02 initial version
    * 2020-07-23 usage of zones instead of cells everywhere, extending to support also data DGGS servers.
    * 2020-09-22 minor updates before publication of a working service based on the API
  contact:
    name: Andrea Aime
    email: andrea.aime@geo-solutions.it
  license:
    name: OGC License
    url: 'http://www.opengeospatial.org/legal/'
  version: 0.0.3
tags:
  - name: Capabilities
    description: essential characteristics of this API

paths:
  /:
    get:
      tags:
        - Capabilities
      summary: landing page
      description: |-
        The landing page provides links to the API definition, the conformance
        statements and to other resources provided by the API.
      responses:
        '200':
          $ref: 'http://schemas.opengis.net/ogcapi/features/part1/1.0/openapi/ogcapi-features-1.yaml#/components/responses/LandingPage'
        '406':
          $ref: '#/components/responses/NotSupported'
        '500':
          $ref: 'http://schemas.opengis.net/ogcapi/features/part1/1.0/openapi/ogcapi-features-1.yaml#/components/responses/ServerError'
  /conformance:
    get:
      tags:
        - Capabilities
      summary: information about specifications that this API conforms to.
      description: |-
        A list of all conformance classes specified in a standard that the
        server conforms to.
      responses:
        '200':
          $ref: 'http://schemas.opengis.net/ogcapi/features/part1/1.0/openapi/ogcapi-features-1.yaml#/components/responses/ConformanceDeclaration'
        '406':
          $ref: '#/components/responses/NotSupported'
        '500':
          $ref: 'http://schemas.opengis.net/ogcapi/features/part1/1.0/openapi/ogcapi-features-1.yaml#/components/responses/ServerError'
  /collections:
    get:
      tags:
        - Capabilities
      summary: the list of supported collections
      responses:
        '200':
          $ref: '#/components/responses/DGGSList'
        '406':
          $ref: '#/components/responses/NotSupported'
        '500':
          $ref: 'http://schemas.opengis.net/ogcapi/features/part1/1.0/openapi/ogcapi-features-1.yaml#/components/responses/ServerError'

  /collections/{collectionId}:
    get:
      tags:
        - DGGS access
      summary: Describes a particular DGGS
      parameters:
        - $ref: '#/components/parameters/collectionId'
      responses:
        '200':
          $ref: '#/components/responses/DGGSDescription'
        '406':
          $ref: '#/components/responses/NotSupported'
        '500':
          $ref: 'http://schemas.opengis.net/ogcapi/features/part1/1.0/openapi/ogcapi-features-1.yaml#/components/responses/ServerError'

  /collections/{collectionId}/zones:
    get:
      tags:
        - DGGS access
      summary: Access the list of zones in a given DGGS. Can list either all the zones, or a particular subset based on resolution, WGS84 bbox, or list of containing zones (e.g., polygon defined in DGGS terms)
      parameters:
        - $ref: '#/components/parameters/collectionId'
        - $ref: '#/components/parameters/resolution'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/datetime'
        - $ref: '#/components/parameters/bbox'
        - $ref: '#/components/parameters/geom'
        - $ref: '#/components/parameters/zones'        
      responses:
        '200':
          $ref: '#/components/responses/ZoneList'
        '406':
          $ref: '#/components/responses/NotSupported'
        '500':
          $ref: 'http://schemas.opengis.net/ogcapi/features/part1/1.0/openapi/ogcapi-features-1.yaml#/components/responses/ServerError'

  /collections/{collectionId}/zone:
    get:
      tags:
        - DGGS access
      summary: Access the definition of a particular zone
      parameters:
        - $ref: '#/components/parameters/collectionId'
        - $ref: '#/components/parameters/zoneId'
        - $ref: '#/components/parameters/datetime'
      responses:
        '200':
          $ref: '#/components/responses/Zone'
        '406':
          $ref: '#/components/responses/NotSupported'
        '500':
          $ref: 'http://schemas.opengis.net/ogcapi/features/part1/1.0/openapi/ogcapi-features-1.yaml#/components/responses/ServerError'

  /collections/{collectionId}/neighbors:
    get:
      tags:
        - DGGS access
      summary: Get the list of neighboring zones, to a given zone (should it return just a list of identifiers instead of a GeoJSON collection? Could even be a list of links in the zone itself)
      parameters:
        - $ref: '#/components/parameters/collectionId'
        - $ref: '#/components/parameters/zoneId'
        - $ref: '#/components/parameters/datetime' 
        - $ref: '#/components/parameters/radius'
      responses:
        '200':
          $ref: '#/components/responses/ZoneList'
        '406':
          $ref: '#/components/responses/NotSupported'
        '500':
          $ref: 'http://schemas.opengis.net/ogcapi/features/part1/1.0/openapi/ogcapi-features-1.yaml#/components/responses/ServerError'

  /collections/{collectionId}/parents:
    get:
      tags:
        - DGGS access
      summary: Get the list of parent zones, to a given zone (should it return just a list of identifiers instead of a GeoJSON collection?)
      parameters:
        - $ref: '#/components/parameters/collectionId'
        - $ref: '#/components/parameters/zoneId'
        - $ref: '#/components/parameters/datetime' 
        - $ref: '#/components/parameters/levels'
      responses:
        '200':
          $ref: '#/components/responses/ZoneList'
        '406':
          $ref: '#/components/responses/NotSupported'
        '500':
          $ref: 'http://schemas.opengis.net/ogcapi/features/part1/1.0/openapi/ogcapi-features-1.yaml#/components/responses/ServerError'

  /collections/{collectionId}/children:
    get:
      tags:
        - DGGS access
      summary: Get the list of zones children of a given zone (should it return just a list of identifiers instead of a GeoJSON collection?)
      parameters:
        - $ref: '#/components/parameters/collectionId'
        - $ref: '#/components/parameters/zoneId'
        - $ref: '#/components/parameters/datetime' 
        - $ref: '#/components/parameters/levels'
      responses:
        '200':
          $ref: '#/components/responses/ZoneList'
        '406':
          $ref: '#/components/responses/NotSupported'
        '500':
          $ref: 'http://schemas.opengis.net/ogcapi/features/part1/1.0/openapi/ogcapi-features-1.yaml#/components/responses/ServerError'

  /collections/{collectionId}/point:
    get:
      tags:
        - DGGS access
      summary: Returns the id of the zone containing the given point, at the given resolution
      parameters:
        - $ref: '#/components/parameters/collectionId'
        - $ref: '#/components/parameters/point'
        - $ref: '#/components/parameters/resolution'
        - $ref: '#/components/parameters/datetime'
      responses:
        '200':
          $ref: '#/components/responses/ZoneList'
        '406':
          $ref: '#/components/responses/NotSupported'
        '500':
          $ref: 'http://schemas.opengis.net/ogcapi/features/part1/1.0/openapi/ogcapi-features-1.yaml#/components/responses/ServerError'

  /collections/{collectionId}/polygon:
    get:
      tags:
        - DGGS access
      summary: Lists zones contained in the polygon
      parameters:
        - $ref: '#/components/parameters/collectionId'
        - $ref: '#/components/parameters/bbox'
        - $ref: '#/components/parameters/polygon'
        - $ref: '#/components/parameters/resolution'
        - $ref: '#/components/parameters/datetime'
      responses:
        '200':
          $ref: '#/components/responses/ZoneList'
        '406':
          $ref: '#/components/responses/NotSupported'
        '500':
          $ref: 'http://schemas.opengis.net/ogcapi/features/part1/1.0/openapi/ogcapi-features-1.yaml#/components/responses/ServerError'

  /collections/{collectionId}/dapa:
    get:
      tags:
        - DAPA
      summary: list the available data retrieval patterns
      parameters:
        - $ref: '#/components/parameters/collectionId'
        - $ref: '#/components/parameters/f'
      responses:
        200:
          description: The operation was executed successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/dapa'
              example:
                title: Data retrieval patterns
                description: The following endpoints are available to retrieve and
                  process the observations in addition to the standard feature queries.
                  The endpoints are described in the API definition and the links
                  point to the specification of the operation in the OpenAPI definition
                  with the available input parameters and the response schema.
                endpoints:
                  - title: retrieve a time series for selected variables for each station
                      in an area
                    description: |-
                      This DAPA endpoint returns observation values at the selected location
                        in the selected time interval or at the selected time instant.
  
                      All values in the time interval for each requested variable 
                      (parameter `variables`) are aggregated and each of the requested statistical 
                      functions (parameter `functions`) is applied to the aggregated values.
                    links:
                      - rel: ogc-dapa-endpoint
                        title: Execute the data retrieval pattern with the default parameters
                        href: /collections/observation/dapa/area
                      - rel: ogc-dapa-endpoint-definition
                        title: Detailed description in the API definition (OpenAPI 3.0)
                        href: /api?f=json#/paths/~1collections~1observation~1dapa
                      - rel: ogc-dapa-endpoint-documentation
                        title: Detailed description in the API documentation
                        href: /api?f=html#/DAPA/get_collections_observation_dapa
                    id: area
                    inputCollectionId: observation
                    mediaTypes:
                      - application/geo+json
                      - text/csv
                    externalDocs:
                      description: Example requests and responses
                      url: https://github.com/cportele/ogc-api-dev/blob/master/dapa/06-area.md
                  - title: retrieve a time series for selected variables for each station
                      in an area and apply functions on the values of each time step
                    description: "This DAPA endpoint returns a time series for an area\
                      \ (parameter `bbox`, `coord` or `coordRef`) in the selected time\
                      \ interval or at the selected time instant (parameter `datetime`).\
                      \ \n\nAll values in the area for each requested variable (parameter\
                      \ `variables`) are aggregated for each time step and each of the\
                      \ requested statistical functions (parameter `functions`) is applied\
                      \ to the aggregated values."
                    links:
                      - rel: ogc-dapa-endpoint
                        title: Execute the data retrieval pattern with the default parameters
                        href: /collections/observation/dapa/area:aggregate-space
                      - rel: ogc-dapa-endpoint-definition
                        title: Detailed description in the API definition (OpenAPI 3.0)
                        href: /api?f=json#/paths/~1collections~1observation~1dapa
                      - rel: ogc-dapa-endpoint-documentation
                        title: Detailed description in the API documentation
                        href: /api?f=html#/DAPA/get_collections_observation_dapa
                    id: area:aggregate-space
                    inputCollectionId: observation
                    mediaTypes:
                      - application/geo+json
                      - text/csv
                    externalDocs:
                      description: Example requests and responses
                      url: https://github.com/cportele/ogc-api-dev/blob/master/dapa/10-area-agg-space.md
            text/html:
              schema:
                $ref: '#/components/schemas/htmlSchema'
        400:
          $ref: https://raw.githubusercontent.com/opengeospatial/ogcapi-features/master/core/openapi/ogcapi-features-1.yaml#/components/responses/InvalidParameter
        406:
          $ref: https://raw.githubusercontent.com/opengeospatial/ogcapi-features/master/core/openapi/ogcapi-features-1.yaml#/components/responses/NotAcceptable
        500:
          $ref: https://raw.githubusercontent.com/opengeospatial/ogcapi-features/master/core/openapi/ogcapi-features-1.yaml#/components/responses/ServerError
          
  /collections/{collectionId}/dapa/variables:
    get:
      tags:
        - DAPA
      summary: fetch the observable properties included in this observation collection
      parameters:
        - $ref: '#/components/parameters/collectionId' 
        - $ref: '#/components/parameters/f'
      responses:
        200:
          description: The operation was executed successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Variables'
              example:
                variables:
                  - id: B01
                    title: Variable of type Long
                  - id: B02
                    title: Variable of type Long
                  - id: SNWD
                    title: Snow depth
            text/html:
              schema:
                $ref: '#/components/schemas/htmlSchema'
        400:
          $ref: https://raw.githubusercontent.com/opengeospatial/ogcapi-features/master/core/openapi/ogcapi-features-1.yaml#/components/responses/InvalidParameter
        406:
          $ref: https://raw.githubusercontent.com/opengeospatial/ogcapi-features/master/core/openapi/ogcapi-features-1.yaml#/components/responses/NotAcceptable
        500:
          $ref: https://raw.githubusercontent.com/opengeospatial/ogcapi-features/master/core/openapi/ogcapi-features-1.yaml#/components/responses/ServerError
  /collections/{collectionId}/dapa/area:aggregate-space-time:
    get:
      tags:
        - DAPA
      summary: retrieve a time series for selected variables for each zone in an
        area and apply functions on all values
      description: "This DAPA endpoint returns observation values for an area (parameter\
        \ `bbox`, `coord` or `coordRef`) in the selected time interval or at the selected\
        \ time instant (parameter `datetime`). \n\nAll values for each requested variable\
        \ (parameter `variables`) are aggregated and each of the requested statistical\
        \ functions (parameter `functions`) is applied to the aggregated values."
      externalDocs:
        description: Example requests and responses
        url: https://github.com/cportele/ogc-api-dev/blob/master/dapa/11-area-agg-space-time.md
      parameters:
        - $ref: '#/components/parameters/collectionId'
        - $ref: '#/components/parameters/bbox'
        - $ref: '#/components/parameters/geom'
        - $ref: '#/components/parameters/zones'
        - $ref: '#/components/parameters/resolution'
        - $ref: '#/components/parameters/datetime'
        - $ref: '#/components/parameters/f'
        - $ref: '#/components/parameters/functions'
        - $ref: '#/components/parameters/variables'
      responses:
        200:
          description: The operation was executed successfully.
          content:
            text/csv:
              schema:
                $ref: '#/components/schemas/csv'
              example: |-
                PRCP_count,PRCP_max,PRCP_mean,PRCP_min,PRCP_std-dev,TMAX_count,TMAX_max,TMAX_mean,TMAX_min,TMAX_std-dev,TMIN_count,TMIN_max,TMIN_mean,TMIN_min,TMIN_std-dev
                3545,490.0,33.057137,0.0,57.29267,2425,351.0,251.16705,67.0,32.354607,2430,206.0,139.8475,20.0,21.919683
            application/geo+json:
              schema:
                $ref: https://raw.githubusercontent.com/opengeospatial/ogcapi-features/master/core/openapi/ogcapi-features-1.yaml#/components/schemas/featureCollectionGeoJSON
              example:
                type: FeatureCollection
                features:
                  - type: Feature
                    geometry:
                      type: Polygon
                      coordinates:
                        - - - 5.8
                            - 47.2
                          - - 15.1
                            - 47.2
                          - - 15.1
                            - 55.1
                          - - 5.8
                            - 55.1
                          - - 5.8
                            - 47.2
                    properties:
                      phenomenonTime: 2019-08-07/2019-08-11
                      TMIN_count: 2430
                      TMAX_count: 2425
                      PRCP_count: 3545
                      TMIN_min: 20
                      TMAX_mean: 251.16705
                      PRCP_std-dev: 57.29267
                      TMIN_std-dev: 21.919683
                      TMIN_max: 206
                      TMAX_max: 351
                      PRCP_min: 0
                      PRCP_mean: 33.057137
                      TMAX_min: 67
                      PRCP_max: 490
                      TMAX_std-dev: 32.354607
                      TMIN_mean: 139.8475
        400:
          $ref: https://raw.githubusercontent.com/opengeospatial/ogcapi-features/master/core/openapi/ogcapi-features-1.yaml#/components/responses/InvalidParameter
        406:
          $ref: https://raw.githubusercontent.com/opengeospatial/ogcapi-features/master/core/openapi/ogcapi-features-1.yaml#/components/responses/NotAcceptable
        500:
          $ref: https://raw.githubusercontent.com/opengeospatial/ogcapi-features/master/core/openapi/ogcapi-features-1.yaml#/components/responses/ServerError
components:
  schemas:
    collection:
      type: object
      required:
        - id
        - links
      properties:
        id:
          description: dentifier of the the collection. In case it's a DGGS RS service, it will be the DGGS instance identifier, otherwise, it's going to be the data collection id.
          type: string
          example: TB16-Pix
        dggs-id:
          description: identifiers of the DGGS instance. For DGGS RS services, it will be the same as the id, for DGGS Data services, it identifiers the particular DGGS instance used.
          type: string
          example: TB16-Pix
        title:
          description: human readable title of the collection
          type: string
          example: Testbed 16 DGGS reference system based on rHealPix
        description:
          description: a description of the collection
          type: string
          example: Some description of the DGGS here
        resolutions:
          type: array
          items:
            type: number
        links:
          type: array
          description: The list of links, e.g., to the operations provided by this DGGS collection.
          items:
            $ref: "#/components/schemas/link"
          example:
            - href: http://data.example.com/buildings
              rel: item
            - href: http://example.com/concepts/buildings.html
              rel: describedBy
              type: text/html
    collection-list:
      type: object
      required:
        - links
        - dggs-list
      properties:
        links:
          type: array
          items:
            $ref: "#/components/schemas/link"
        dggs-list:
          type: array
          items:
            type: string
    zoneGeoJSON:
      allOf:
        - $ref: 'https://raw.githubusercontent.com/opengeospatial/ogcapi-features/master/core/openapi/ogcapi-features-1.yaml#/components/schemas/featureCollectionGeoJSON'
        - type: object
          required:
            - resolution
          properties:
            resolution:
              type: number
    DGGSJSON:
      type: object
      required:
        - id
        - type
        - geometry
        - properties
      properties:
        id:
          oneOf:
            - type: string
            - type: integer
        type:
          type: string
          enum:
            - Feature
        geometry:
          description: The geometry of the feature, as a list of DGGS zone ids
          type: array
          items:
            type: string
        properties:
          type: object
          nullable: true
        links:
          type: array
          items:
            $ref: "#/components/schemas/link"
    zoneCollectionGeoJSON:
      type: object
      required:
        - type
        - features
      properties:
        type:
          type: string
          enum:
            - FeatureCollection
        features:
          type: array
          items:
            $ref: "#/components/schemas/zoneGeoJSON"
        links:
          type: array
          items:
            $ref: "#/components/schemas/link"
        timeStamp:
          $ref: "#/components/schemas/timeStamp"
        numberMatched:
          $ref: "#/components/schemas/numberMatched"
        numberReturned:
          $ref: "#/components/schemas/numberReturned"
    zoneCollectionDGGSJSON:
      type: object
      required:
        - type
        - features
      properties:
        type:
          type: string
          enum:
            - FeatureCollection
        features:
          type: array
          items:
            $ref: "#/components/schemas/DGGSJSON"
        links:
          type: array
          items:
            $ref: "#/components/schemas/link"
        timeStamp:
          $ref: "#/components/schemas/timeStamp"
        numberMatched:
          $ref: "#/components/schemas/numberMatched"
        numberReturned:
          $ref: "#/components/schemas/numberReturned"
    zoneList:
      type: object
      required:
        - zones
        - links
      properties:
        zones:
          type: array
          items:
            type: string
        links:
          type: array
          items:
            $ref: "#/components/schemas/link"
        timeStamp:
          $ref: "#/components/schemas/timeStamp"
        numberMatched:
          $ref: "#/components/schemas/numberMatched"
        numberReturned:
          $ref: "#/components/schemas/numberReturned"
    link:
      type: object
      required:
        - href
      properties:
        href:
          type: string
          example: http://data.example.com/buildings/123
        rel:
          type: string
          example: alternate
        type:
          type: string
          example: application/geo+json
        hreflang:
          type: string
          example: en
        title:
          type: string
          example: Trierer Strasse 70, 53115 Bonn
        length:
          type: integer
    timeStamp:
      description: This property indicates the time and date when the response was generated.
      type: string
      format: date-time
      example: '2017-08-17T08:05:32Z'
    numberMatched:
      description: |-
        The number of features of the feature type that match the selection
        parameters like `bbox`.
      type: integer
      minimum: 0
      example: 127
    numberReturned:
      description: |-
        The number of features in the feature collection.

        A server may omit this information in a response, if the information
        about the number of features is not known or difficult to compute.

        If the value is provided, the value shall be identical to the number
        of items in the "features" array.
      type: integer
      minimum: 0
      example: 10
    dapa:
      type: object
      properties:
        endpoints:
          type: array
          items:
            required:
              - id
              - inputCollectionId
            type: object
            properties:
              mediaTypes:
                type: array
                items:
                  type: string
              externalDocs:
                required:
                  - url
                type: object
                properties:
                  url:
                    type: string
                  description:
                    type: string
              inputCollectionId:
                type: string
              id:
                type: string
              title:
                type: string
              links:
                type: array
                items:
                  $ref: https://raw.githubusercontent.com/opengeospatial/ogcapi-features/master/core/openapi/ogcapi-features-1.yaml#/components/schemas/link
              description:
                type: string
        title:
          type: string
        links:
          type: array
          items:
            $ref: https://raw.githubusercontent.com/opengeospatial/ogcapi-features/master/core/openapi/ogcapi-features-1.yaml#/components/schemas/link
        description:
          type: string
    Variables:
      type: object
      properties:
        variables:
          type: array
          items:
            required:
              - id
            type: object
            properties:
              title:
                type: string
              uom:
                type: string
              description:
                type: string
              id:
                type: string
    htmlSchema:
      type: string
      example: <html>...</html>
  responses:
    NotSupported:
      description: None of the requested media types is supported at the path.
      content:
        application/json:
          schema:
            $ref: 'http://schemas.opengis.net/ogcapi/features/part1/1.0/openapi/ogcapi-features-1.yaml#/components/schemas/exception'
        text/html:
          schema:
            type: string
    DGGSDescription:
      description: |-
        Describes a particular DGGS

        This information includes:

        * A local identifier for the DGGS that is unique for this API;
        * An optional human readable title and description for the DGGS;
        * The predominant zone shape (rectangular, triangular, hexagonal)
        * The list of resolutions for the particular DGGS
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/collection'
          example:
            id: TB16-Pix
            title: Testbed 16 DGGS reference system based on rHealPix
            description: A rHealPix instance based on WGS84, rotated so that all the corners of the cube lie in water
            resolutions: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
            links:
              - href: 'https://iopscience.iop.org/article/10.1088/1755-1315/34/1/012012/pdf'
                rel: describedBy
                type: application/PDF
                title: The rHealPix DGGS specification
        text/html:
          schema:
            type: string
    DGGSList:
      description: |-
        The list of DGGS available and link to the processes

        The response contains the list of DGGS objects.
        This information includes:

        * A local identifier for the DGGS that is unique for this API;
        * An optional human readable title and description for the DGGS;
        * The predominant zone shape (rectangular, triangular, hexagonal)
        * The list of resolutions for the particular DGGS
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/collection-list'
          example:
            links:
              - href: 'http://data.example.org/dggs.json'
                rel: self
                type: application/json
                title: this document
              - href: 'http://data.example.org/dggs.html'
                rel: alternate
                type: text/html
                title: this document as HTML
            dggs-list:
              - id: TB16-Pix
                title: The Testbed16 DGGS based on rHealPix
                description: The rHealPix DGGS
                resolutions: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
                links:
                  - href: 'https://iopscience.iop.org/article/10.1088/1755-1315/34/1/012012/pdf'
                    rel: describedBy
                    type: application/PDF
                    title: The rHealPix DGGS specification
                  - href: 'http://data.example.org/dggs/rHealPix/zones'
                    rel: zones
                    type: appplication/json
              - id: H3
                title: H3
                description: The H3 DGGS
                resolutions: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16]
                links:
                  - href: 'https://eng.uber.com/h3/'
                    rel: describedBy
                    type: text/html
                    title: The H3 specification
                  - href: 'http://data.example.org/dggs/H3/zones'
                    rel: zones
                    type: appplication/json
        text/html:
          schema:
            type: string
    ZoneList:
      description: |-
        A list of DGGS zones.

        The response contains a list of DGGS zones. The response can be a GeoJSON payload with full boundaries, for traditional clients, or a simple list of zone ids, for DGGS aware clients
      content:
        application/geo+json:
          schema:
            $ref: '#/components/schemas/zoneCollectionGeoJSON'
          example:
            - type: FeatureCollection
              features:
                - type: Feature
                  id: 'P4'
                  geometry:
                    type: Polygon
                    coordinates:
                      - ...
                  properties:
                    resolution: 0
                    center:
                      type: Point
                      coordinates: [0, 0]
                - type: Feature
                  id: 'Q4'
                  geometry:
                    type: Polygon
                    coordinates:
                      - ...
                  properties:
                    resolution: 0
                    center:
                      type: Point
                      coordinates: [0, 0]
        application/dggs+json:
          schema:
            $ref: '#/components/schemas/zoneCollectionDGGSJSON'
          example:
            - type: FeatureCollection
              features:
                - type: Feature
                  id: 'P4'
                  geometry: [ 'P4' ]
                  properties: null
                - type: Feature
                  id: 'Q4'
                  geometry: ['Q4']
                  properties:
                    myAttribute: 3
                    otherAttribute: "abc"
                - type: Feature
                  id: 'myFeature.1'
                  geometry: ['Q4', 'P4', 'P32']
                  properties:
                    myAttribute: 3
                    otherAttribute: "abc"
        text/html:
          schema:
            type: string
    Zone:
      description: |-
        A single DGGS zone

        The response contains the description of a single DGGS zone
      content:
        application/geo+json:
          schema:
            $ref: '#/components/schemas/zoneGeoJSON'
          example:
            type: Feature
            id: 'P4'
            geometry:
              type: Polygon
              coordinates:
                - ...
            resolution: 0
            properties:
              att1: value1
              att2: value2
        application/dggs+json:
          schema:
            $ref: '#/components/schemas/DGGSJSON'
          example:
            type: Feature
            id: 'P4'
            geometry: ['P4']
            properties:
              att1: value1
              att2: value2
        text/html:
          schema:
            type: string
  parameters:
    f:
      name: f
      in: query
      description: |-
        The format of the response. If no value is provided, the standard http
        rules apply,i.e., the accept header shall be used to determine the format.
      required: false
      style: form
      explode: false
      schema:
        type: string
    zoneId:
      name: zoneId
      in: query
      required: true
      schema:
        type: string
        example: Q3
    levels:
      name: levels
      description: Number of levels for zone parent/children extration
      in: query
      required: false
      schema:
        type: integer
        minimum: 1
        example: 5
    radius:
      name: radius
      description: Distance, in zones, from the center zone, to be walked when extracting neighbours. Also known as ``k`` in a k-ring extraction in some DGGSs.
      in: query
      required: false
      schema:
        type: integer
        minimum: 1
        example: 5
    resolution:
      name: resolution
      in: query
      required: true
      schema:
        type: number
    crs:
      name: crs
      in: query
      description: |-
        The coordinate reference system of the response geometries. Default is
        WGS84 longitude/latitude (http://www.opengis.net/def/crs/OGC/1.3/CRS84).
      required: false
      style: form
      explode: false
      schema:
        type: string
        default: 'http://www.opengis.net/def/crs/OGC/1.3/CRS84'
        enum:
          - 'http://www.opengis.net/def/crs/OGC/1.3/CRS84'
          - 'http://www.opengis.net/def/crs/EPSG/0/3857'
          - 'http://www.opengis.net/def/crs/EPSG/0/4326'
    bbox:
      name: bbox
      in: query
      description: |-
        Only features that have a geometry that intersects the bounding box are selected.
        The bounding box is provided as four or six numbers, depending on whether the
        coordinate reference system includes a vertical axis (height or depth):

        * Lower left corner, coordinate axis 1
        * Lower left corner, coordinate axis 2
        * Minimum value, coordinate axis 3 (optional)
        * Upper right corner, coordinate axis 1
        * Upper right corner, coordinate axis 2
        * Maximum value, coordinate axis 3 (optional)

        The coordinate reference system of the values is WGS 84 longitude/latitude
        (http://www.opengis.net/def/crs/OGC/1.3/CRS84) unless a different coordinate
        reference system is specified in the parameter `bbox-crs`.

        For WGS 84 longitude/latitude the values are in most cases the sequence of
        minimum longitude, minimum latitude, maximum longitude and maximum latitude.
        However, in cases where the box spans the antimeridian the first value
        (west-most box edge) is larger than the third value (east-most box edge).

        If the vertical axis is included, the third and the sixth number are
        the bottom and the top of the 3-dimensional bounding box.

        If a feature has multiple spatial geometry properties, it is the decision of the
        server whether only a single spatial geometry property is used to determine
        the extent or all relevant geometries.
      required: false
      schema:
        type: array
        minItems: 4
        maxItems: 6
        items:
          type: number
      style: form
      explode: false
    point:
      name: point
      in: query
      description: |-
        Only zones that contain/touch the ponit are returned. The point is provided as:

        * Longitude
        * Latitude

        The coordinate reference system of the values is WGS 84 longitude/latitude
        (http://www.opengis.net/def/crs/OGC/1.3/CRS84).
      required: false
      schema:
        type: array
        minItems: 2
        maxItems: 2
        items:
          type: number
      style: form
      explode: false
    polygon:
      name: polygon
      in: query
      description: |-
        Only zones contained in the polygon are returned. The polygon is specifed in WKT form.

        The coordinate reference system of the values is WGS 84 longitude/latitude
        (http://www.opengis.net/def/crs/OGC/1.3/CRS84).
      required: false
      schema:
        type: string
      style: form
      explode: false
    limit:
      name: limit
      in: query
      description: |-
        The optional limit parameter limits the number of items that are presented in the response document.

        Only items are counted that are on the first level of the collection in the response document.
        Nested objects contained within the explicitly requested items shall not be counted.

        Minimum = 1. Maximum = 10000. Default = 10.
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 10000
        default: 10
      style: form
    zones:
      name: zones
      in: query
      description: |-
        Comma separated list of zone identifiers
      required: false
      schema:
        type: array
        items:
          type: string
    collectionId:
      name: collectionId
      in: path
      description: local identifier of a collection
      required: true
      schema:
        type: string
    datetime:
      name: datetime
      in: query
      description: |-
        Either a date-time or an interval, open or closed. Date and time expressions
        adhere to RFC 3339. Open intervals are expressed using double-dots.

        Examples:

        * A date-time: "2018-02-12T23:20:50Z"
        * A closed interval: "2018-02-12T00:00:00Z/2018-03-18T12:31:12Z"
        * Open intervals: "2018-02-12T00:00:00Z/.." or "../2018-03-18T12:31:12Z"

        Only features that have a temporal property that intersects the value of
        `datetime` are selected.

        If a feature has multiple temporal properties, it is the decision of the
        server whether only a single temporal property is used to determine
        the extent or all relevant temporal properties.
      required: false
      schema:
        type: string
      style: form
      explode: false
    geom:
      name: geom
      in: query
      description: 'A Well Known Text representation of a (MULTI)POLYGON geometry
        as defined in Simple Feature Access - Part 1: Common Architecture.'
      required: false
      style: form
      explode: false
      schema:
        pattern: ^\s*MULTIPOLYGON\s*\(\s*(\(\s*\(\s*[+-]?\d+\.?\d*(?:\s+[+-]?\d+\.?\d*)+(?:\s*\,\s*[+-]?\d+\.?\d*(?:\s+[+-]?\d+\.?\d*)+\s*)+\)\s*(?:\s*\,\s*\(\s*[+-]?\d+\.?\d*(?:\s+[+-]?\d+\.?\d*)+(?:\s*\,\s*[+-]?\d+\.?\d*(?:\s+[+-]?\d+\.?\d*)+\s*)+\)\s*)*\))\s*(?:\s*\,\s*(\(\s*\(\s*[+-]?\d+\.?\d*(?:\s+[+-]?\d+\.?\d*)+(?:\s*\,\s*[+-]?\d+\.?\d*(?:\s+[+-]?\d+\.?\d*)+\s*)+\)\s*(?:\s*\,\s*\(\s*[+-]?\d+\.?\d*(?:\s+[+-]?\d+\.?\d*)+(?:\s*\,\s*[+-]?\d+\.?\d*(?:\s+[+-]?\d+\.?\d*)+\s*)+\)\s*)*\))\s*)*\)\s*$|^\s*POLYGON\s*\(\s*(\(\s*[+-]?\d+\.?\d*(?:\s+[+-]?\d+\.?\d*)+(?:\s*\,\s*[+-]?\d+\.?\d*(?:\s+[+-]?\d+\.?\d*)+\s*)+\))\s*(?:\s*\,\s*(\(\s*[+-]?\d+\.?\d*(?:\s+[+-]?\d+\.?\d*)+(?:\s*\,\s*[+-]?\d+\.?\d*(?:\s+[+-]?\d+\.?\d*)+\s*)+\))\s*)*\)\s*$
        type: string
    functions:
      name: functions
      in: query
      description: The statistical function(s) to apply when aggregating multiple values to a single value.
      required: false
      style: form
      explode: false
      schema:
        type: array
        items:
          type: string
          enum:
            - std-dev
            - count
            - max
            - mean
            - min
            - sum
        default:
          - max
          - mean
          - min
    variables:
      name: variables
      in: query
      description: |-
        A comma-separated list of values with names of observable properties that should be returned in the response.
        More information about the available properties can be retrieved from the `../variables` path.
        The default is to return all observed properties.
      required: false
      style: form
      explode: false
      schema:
        type: array
        items:
          type: string
